<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head lang="en">
	<title th:text="${title}"></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link
		href="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.6/css/bootstrap.min.css"
		th:href="@{/webjars/bootstrap/3.3.6/css/bootstrap.min.css}"
		rel="stylesheet" media="screen" />
	<script src="http://cdn.jsdelivr.net/webjars/jquery/2.2.2/jquery.min.js"
		th:src="@{/webjars/jquery/2.2.2/jquery.min.js}"></script>
	<link th:href="@{/css/default.css}" 
		type="text/css" rel="stylesheet" media="screen" ></link>
</head>
<body>
	<!-- navigation bar -->
	<div th:replace="../fragments/navbar :: navbar"></div>
	
	<!-- content -->
    <iframe id="shinyframe" th:src="${container}" th:if="${@environment.getProperty('shiny.proxy.hide-navbar') != 'true'}" width="100%"></iframe>
    <iframe id="shinyframe" th:src="${container}" th:if="${@environment.getProperty('shiny.proxy.hide-navbar') == 'true'}" style="border: 0; position:absolute; top:0; left:0; right:0; bottom:0; width:100%; height:100%"></iframe>
    
	<script type="text/javascript" th:inline="javascript" th:if="${@environment.getProperty('shiny.proxy.hide-navbar') != 'true'}"> 
		function setShinyframeHeight() {
	      $('#shinyframe').css('height', ($(window).height()-50)+'px');
	  }
	  window.addEventListener("load", setShinyframeHeight);
	  window.addEventListener("resize",  setShinyframeHeight);
	</script>
	<script type="text/javascript" th:inline="javascript"> 
		function heartbeat() {
		    setTimeout(function() {
		        $.ajax("/heartbeat" + window.location.pathname).success(function(data) {
		        	heartbeat();
		        });
		    }, [[${heartbeatRate}]]);
		};
		heartbeat();
	</script>
</body>
</html>
